{"ast":null,"code":"// Version: 2.8.2\n// https://github.com/DevExpress/DevExtreme.AspNet.Data\n// Copyright (c) Developer Express Inc.\n\n/* global define, module, require */\n(function (factory) {\n  \"use strict\";\n\n  if (typeof define === \"function\" && define.amd) {\n    define(function (require, exports, module) {\n      module.exports = factory(require(\"devextreme/core/utils/ajax\"), require(\"devextreme/core/utils/deferred\").Deferred, require(\"devextreme/core/utils/extend\").extend, require(\"devextreme/data/custom_store\"), require(\"devextreme/data/utils\"));\n    });\n  } else if (typeof module === \"object\" && module.exports) {\n    module.exports = factory(require(\"devextreme/core/utils/ajax\"), require(\"devextreme/core/utils/deferred\").Deferred, require(\"devextreme/core/utils/extend\").extend, require(\"devextreme/data/custom_store\"), require(\"devextreme/data/utils\"));\n  } else {\n    throw \"This script should be used with an AMD or CommonJS loader\";\n  }\n})(function (ajaxUtility, Deferred, extend, CustomStore, dataUtils) {\n  \"use strict\";\n\n  var CUSTOM_STORE_OPTIONS = [\"onLoading\", \"onLoaded\", \"onInserting\", \"onInserted\", \"onUpdating\", \"onUpdated\", \"onRemoving\", \"onRemoved\", \"onModifying\", \"onModified\", \"onPush\", \"loadMode\", \"cacheRawData\", \"errorHandler\"];\n\n  function createStoreConfig(options) {\n    var keyExpr = options.key,\n        loadUrl = options.loadUrl,\n        loadMethod = options.loadMethod || \"GET\",\n        loadParams = options.loadParams,\n        isRawLoadMode = options.loadMode === \"raw\",\n        updateUrl = options.updateUrl,\n        insertUrl = options.insertUrl,\n        deleteUrl = options.deleteUrl,\n        onBeforeSend = options.onBeforeSend,\n        onAjaxError = options.onAjaxError;\n\n    function send(operation, requiresKey, ajaxSettings, customSuccessHandler) {\n      var d = Deferred(),\n          thenable,\n          beforeSendResult;\n\n      function sendCore() {\n        ajaxUtility.sendRequest(ajaxSettings).then(function (res, textStatus, xhr) {\n          if (customSuccessHandler) customSuccessHandler(d, res, xhr);else d.resolve();\n        }, function (xhr, textStatus) {\n          var error = getErrorMessageFromXhr(xhr);\n\n          if (onAjaxError) {\n            var e = {\n              xhr: xhr,\n              error: error\n            };\n            onAjaxError(e);\n            error = e.error;\n          }\n\n          if (error) d.reject(error);else d.reject(xhr, textStatus);\n        });\n      }\n\n      if (requiresKey && !keyExpr) {\n        d.reject(new Error(\"Primary key is not specified (operation: '\" + operation + \"', url: '\" + ajaxSettings.url + \"')\"));\n      } else {\n        if (operation === \"load\") {\n          ajaxSettings.cache = false;\n          ajaxSettings.dataType = \"json\";\n        } else {\n          ajaxSettings.dataType = \"text\";\n        }\n\n        if (onBeforeSend) {\n          beforeSendResult = onBeforeSend(operation, ajaxSettings);\n          if (beforeSendResult && typeof beforeSendResult.then === \"function\") thenable = beforeSendResult;\n        }\n\n        if (thenable) thenable.then(sendCore, function (error) {\n          d.reject(error);\n        });else sendCore();\n      }\n\n      return d.promise();\n    }\n\n    function filterByKey(keyValue) {\n      if (!Array.isArray(keyExpr)) return [keyExpr, keyValue];\n      return keyExpr.map(function (i) {\n        return [i, keyValue[i]];\n      });\n    }\n\n    function loadOptionsToActionParams(options, isCountQuery) {\n      var result = {};\n      if (isCountQuery) result.isCountQuery = isCountQuery;\n\n      if (options) {\n        [\"skip\", \"take\", \"requireTotalCount\", \"requireGroupCount\"].forEach(function (i) {\n          if (options[i] !== undefined) result[i] = options[i];\n        });\n        var normalizeSorting = dataUtils.normalizeSortingInfo,\n            group = options.group,\n            filter = options.filter,\n            select = options.select;\n        if (options.sort) result.sort = JSON.stringify(normalizeSorting(options.sort));\n\n        if (group) {\n          if (!isAdvancedGrouping(group)) group = normalizeSorting(group);\n          result.group = JSON.stringify(group);\n        }\n\n        if (Array.isArray(filter)) {\n          filter = extend(true, [], filter);\n          stringifyDatesInFilter(filter);\n          result.filter = JSON.stringify(filter);\n        }\n\n        if (options.totalSummary) result.totalSummary = JSON.stringify(options.totalSummary);\n        if (options.groupSummary) result.groupSummary = JSON.stringify(options.groupSummary);\n\n        if (select) {\n          if (!Array.isArray(select)) select = [select];\n          result.select = JSON.stringify(select);\n        }\n      }\n\n      extend(result, loadParams);\n      return result;\n    }\n\n    function handleInsertUpdateSuccess(d, res, xhr) {\n      var mime = xhr.getResponseHeader(\"Content-Type\"),\n          isJSON = mime && mime.indexOf(\"application/json\") > -1;\n      d.resolve(isJSON ? JSON.parse(res) : res);\n    }\n\n    var result = {\n      key: keyExpr,\n      useDefaultSearch: true,\n      load: function (loadOptions) {\n        return send(\"load\", false, {\n          url: loadUrl,\n          method: loadMethod,\n          data: loadOptionsToActionParams(loadOptions)\n        }, function (d, res) {\n          processLoadResponse(d, res, function (res) {\n            return [res.data, createLoadExtra(res)];\n          });\n        });\n      },\n      totalCount: !isRawLoadMode && function (loadOptions) {\n        return send(\"load\", false, {\n          url: loadUrl,\n          method: loadMethod,\n          data: loadOptionsToActionParams(loadOptions, true)\n        }, function (d, res) {\n          processLoadResponse(d, res, function (res) {\n            return [res.totalCount];\n          });\n        });\n      },\n      byKey: !isRawLoadMode && function (key) {\n        return send(\"load\", true, {\n          url: loadUrl,\n          method: loadMethod,\n          data: loadOptionsToActionParams({\n            filter: filterByKey(key)\n          })\n        }, function (d, res) {\n          processLoadResponse(d, res, function (res) {\n            return [res.data[0]];\n          });\n        });\n      },\n      update: updateUrl && function (key, values) {\n        return send(\"update\", true, {\n          url: updateUrl,\n          method: options.updateMethod || \"PUT\",\n          data: {\n            key: serializeKey(key),\n            values: JSON.stringify(values)\n          }\n        }, handleInsertUpdateSuccess);\n      },\n      insert: insertUrl && function (values) {\n        return send(\"insert\", true, {\n          url: insertUrl,\n          method: options.insertMethod || \"POST\",\n          data: {\n            values: JSON.stringify(values)\n          }\n        }, handleInsertUpdateSuccess);\n      },\n      remove: deleteUrl && function (key) {\n        return send(\"delete\", true, {\n          url: deleteUrl,\n          method: options.deleteMethod || \"DELETE\",\n          data: {\n            key: serializeKey(key)\n          }\n        });\n      }\n    };\n    CUSTOM_STORE_OPTIONS.forEach(function (name) {\n      var value = options[name];\n      if (value !== undefined) result[name] = value;\n    });\n    return result;\n  }\n\n  function processLoadResponse(d, res, getResolveArgs) {\n    res = expandLoadResponse(res);\n    if (!res || typeof res !== \"object\") d.reject(new Error(\"Unexpected response received\"));else d.resolve.apply(d, getResolveArgs(res));\n  }\n\n  function expandLoadResponse(value) {\n    if (Array.isArray(value)) return {\n      data: value\n    };\n    if (typeof value === \"number\") return {\n      totalCount: value\n    };\n    return value;\n  }\n\n  function createLoadExtra(res) {\n    return {\n      totalCount: \"totalCount\" in res ? res.totalCount : -1,\n      groupCount: \"groupCount\" in res ? res.groupCount : -1,\n      summary: res.summary || null\n    };\n  }\n\n  function serializeKey(key) {\n    if (typeof key === \"object\") return JSON.stringify(key);\n    return key;\n  }\n\n  function serializeDate(date) {\n    function zpad(text, len) {\n      text = String(text);\n\n      while (text.length < len) text = \"0\" + text;\n\n      return text;\n    }\n\n    var builder = [1 + date.getMonth(), \"/\", date.getDate(), \"/\", date.getFullYear()],\n        h = date.getHours(),\n        m = date.getMinutes(),\n        s = date.getSeconds(),\n        f = date.getMilliseconds();\n    if (h + m + s + f > 0) builder.push(\" \", zpad(h, 2), \":\", zpad(m, 2), \":\", zpad(s, 2), \".\", zpad(f, 3));\n    return builder.join(\"\");\n  }\n\n  function stringifyDatesInFilter(crit) {\n    crit.forEach(function (v, k) {\n      if (Array.isArray(v)) {\n        stringifyDatesInFilter(v);\n      } else if (Object.prototype.toString.call(v) === \"[object Date]\") {\n        crit[k] = serializeDate(v);\n      }\n    });\n  }\n\n  function isAdvancedGrouping(expr) {\n    if (!Array.isArray(expr)) return false;\n\n    for (var i = 0; i < expr.length; i++) {\n      if (\"groupInterval\" in expr[i] || \"isExpanded\" in expr[i]) return true;\n    }\n\n    return false;\n  }\n\n  function getErrorMessageFromXhr(xhr) {\n    var mime = xhr.getResponseHeader(\"Content-Type\"),\n        responseText = xhr.responseText;\n    if (!mime) return null;\n    if (mime.indexOf(\"text/plain\") === 0) return responseText;\n\n    if (mime.indexOf(\"application/json\") === 0) {\n      var jsonObj = safeParseJSON(responseText);\n      if (typeof jsonObj === \"string\") return jsonObj;\n\n      if (typeof jsonObj === \"object\") {\n        for (var key in jsonObj) {\n          if (typeof jsonObj[key] === \"string\") return jsonObj[key];\n        }\n      }\n\n      return responseText;\n    }\n\n    return null;\n  }\n\n  function safeParseJSON(json) {\n    try {\n      return JSON.parse(json);\n    } catch (x) {\n      return null;\n    }\n  }\n\n  return {\n    createStore: function (options) {\n      return new CustomStore(createStoreConfig(options));\n    }\n  };\n});","map":{"version":3,"sources":["C:/Pessoal/poc-pivot/node_modules/devextreme-aspnet-data-nojquery/index.js"],"names":["factory","define","amd","require","exports","module","Deferred","extend","ajaxUtility","CustomStore","dataUtils","CUSTOM_STORE_OPTIONS","createStoreConfig","options","keyExpr","key","loadUrl","loadMethod","loadParams","isRawLoadMode","loadMode","updateUrl","insertUrl","deleteUrl","onBeforeSend","onAjaxError","send","operation","requiresKey","ajaxSettings","customSuccessHandler","d","thenable","beforeSendResult","sendCore","sendRequest","then","res","textStatus","xhr","resolve","error","getErrorMessageFromXhr","e","reject","Error","url","cache","dataType","promise","filterByKey","keyValue","Array","isArray","map","i","loadOptionsToActionParams","isCountQuery","result","forEach","undefined","normalizeSorting","normalizeSortingInfo","group","filter","select","sort","JSON","stringify","isAdvancedGrouping","stringifyDatesInFilter","totalSummary","groupSummary","handleInsertUpdateSuccess","mime","getResponseHeader","isJSON","indexOf","parse","useDefaultSearch","load","loadOptions","method","data","processLoadResponse","createLoadExtra","totalCount","byKey","update","values","updateMethod","serializeKey","insert","insertMethod","remove","deleteMethod","name","value","getResolveArgs","expandLoadResponse","apply","groupCount","summary","serializeDate","date","zpad","text","len","String","length","builder","getMonth","getDate","getFullYear","h","getHours","m","getMinutes","s","getSeconds","f","getMilliseconds","push","join","crit","v","k","Object","prototype","toString","call","expr","responseText","jsonObj","safeParseJSON","json","x","createStore"],"mappings":"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","sourcesContent":["// Version: 2.8.2\r\n// https://github.com/DevExpress/DevExtreme.AspNet.Data\n// Copyright (c) Developer Express Inc.\n\n/* global define, module, require */\n\n(function(factory) {\n    \"use strict\";\n\n    if(typeof define === \"function\" && define.amd) {\n        define(function(require, exports, module) {\n            module.exports = factory(\n                require(\"devextreme/core/utils/ajax\"),\n                require(\"devextreme/core/utils/deferred\").Deferred,\n                require(\"devextreme/core/utils/extend\").extend,\n                require(\"devextreme/data/custom_store\"),\n                require(\"devextreme/data/utils\")\n            );\n        });\n    } else if (typeof module === \"object\" && module.exports) {\n        module.exports = factory(\n            require(\"devextreme/core/utils/ajax\"),\n            require(\"devextreme/core/utils/deferred\").Deferred,\n            require(\"devextreme/core/utils/extend\").extend,\n            require(\"devextreme/data/custom_store\"),\n            require(\"devextreme/data/utils\")\n        );\n    } else {\n        throw \"This script should be used with an AMD or CommonJS loader\";\n    }\n\n})(function(ajaxUtility, Deferred, extend, CustomStore, dataUtils) {\n    \"use strict\";\n\n    var CUSTOM_STORE_OPTIONS = [\n        \"onLoading\", \"onLoaded\",\n        \"onInserting\", \"onInserted\",\n        \"onUpdating\", \"onUpdated\",\n        \"onRemoving\", \"onRemoved\",\n        \"onModifying\", \"onModified\",\n        \"onPush\",\n        \"loadMode\", \"cacheRawData\",\n        \"errorHandler\"\n    ];\n\n    function createStoreConfig(options) {\n        var keyExpr = options.key,\n            loadUrl = options.loadUrl,\n            loadMethod = options.loadMethod || \"GET\",\n            loadParams = options.loadParams,\n            isRawLoadMode = options.loadMode === \"raw\",\n            updateUrl = options.updateUrl,\n            insertUrl = options.insertUrl,\n            deleteUrl = options.deleteUrl,\n            onBeforeSend = options.onBeforeSend,\n            onAjaxError = options.onAjaxError;\n\n        function send(operation, requiresKey, ajaxSettings, customSuccessHandler) {\n            var d = Deferred(),\n                thenable,\n                beforeSendResult;\n\n            function sendCore() {\n                ajaxUtility.sendRequest(ajaxSettings).then(\n                    function(res, textStatus, xhr) {\n                        if(customSuccessHandler)\n                            customSuccessHandler(d, res, xhr);\n                        else\n                            d.resolve();\n                    },\n                    function(xhr, textStatus) {\n                        var error = getErrorMessageFromXhr(xhr);\n\n                        if(onAjaxError) {\n                            var e = { xhr: xhr, error: error };\n                            onAjaxError(e);\n                            error = e.error;\n                        }\n\n                        if(error)\n                            d.reject(error);\n                        else\n                            d.reject(xhr, textStatus);\n                    }\n                );\n            }\n\n            if(requiresKey && !keyExpr) {\n                d.reject(new Error(\"Primary key is not specified (operation: '\" + operation + \"', url: '\" + ajaxSettings.url + \"')\"));\n            } else {\n                if(operation === \"load\") {\n                    ajaxSettings.cache = false;\n                    ajaxSettings.dataType = \"json\";\n                } else {\n                    ajaxSettings.dataType = \"text\";\n                }\n\n                if(onBeforeSend) {\n                    beforeSendResult = onBeforeSend(operation, ajaxSettings);\n                    if(beforeSendResult && typeof beforeSendResult.then === \"function\")\n                        thenable = beforeSendResult;\n                }\n\n                if(thenable)\n                    thenable.then(sendCore, function(error) { d.reject(error); });\n                else\n                    sendCore();\n            }\n\n            return d.promise();\n        }\n\n        function filterByKey(keyValue) {\n            if(!Array.isArray(keyExpr))\n                return [keyExpr, keyValue];\n\n            return keyExpr.map(function(i) {\n                return [i, keyValue[i]];\n            });\n        }\n\n        function loadOptionsToActionParams(options, isCountQuery) {\n            var result = {};\n\n            if(isCountQuery)\n                result.isCountQuery = isCountQuery;\n\n            if(options) {\n\n                [\"skip\", \"take\", \"requireTotalCount\", \"requireGroupCount\"].forEach(function(i) {\n                    if(options[i] !== undefined)\n                        result[i] = options[i];\n                });\n\n                var normalizeSorting = dataUtils.normalizeSortingInfo,\n                    group = options.group,\n                    filter = options.filter,\n                    select = options.select;\n\n                if(options.sort)\n                    result.sort = JSON.stringify(normalizeSorting(options.sort));\n\n                if(group) {\n                    if(!isAdvancedGrouping(group))\n                        group = normalizeSorting(group);\n                    result.group = JSON.stringify(group);\n                }\n\n                if(Array.isArray(filter)) {\n                    filter = extend(true, [], filter);\n                    stringifyDatesInFilter(filter);\n                    result.filter = JSON.stringify(filter);\n                }\n\n                if(options.totalSummary)\n                    result.totalSummary = JSON.stringify(options.totalSummary);\n\n                if(options.groupSummary)\n                    result.groupSummary = JSON.stringify(options.groupSummary);\n\n                if(select) {\n                    if(!Array.isArray(select))\n                        select = [ select ];\n                    result.select = JSON.stringify(select);\n                }\n            }\n\n            extend(result, loadParams);\n\n            return result;\n        }\n\n        function handleInsertUpdateSuccess(d, res, xhr) {\n            var mime = xhr.getResponseHeader(\"Content-Type\"),\n                isJSON = mime && mime.indexOf(\"application/json\") > -1;\n            d.resolve(isJSON ? JSON.parse(res) : res);\n        }\n\n        var result = {\n            key: keyExpr,\n            useDefaultSearch: true,\n\n            load: function(loadOptions) {\n                return send(\n                    \"load\",\n                    false,\n                    {\n                        url: loadUrl,\n                        method: loadMethod,\n                        data: loadOptionsToActionParams(loadOptions)\n                    },\n                    function(d, res) {\n                        processLoadResponse(d, res, function(res) {\n                            return [ res.data, createLoadExtra(res) ];\n                        });\n                    }\n                );\n            },\n\n            totalCount: !isRawLoadMode && function(loadOptions) {\n                return send(\n                    \"load\",\n                    false,\n                    {\n                        url: loadUrl,\n                        method: loadMethod,\n                        data: loadOptionsToActionParams(loadOptions, true)\n                    },\n                    function(d, res) {\n                        processLoadResponse(d, res, function(res) {\n                            return [ res.totalCount ];\n                        });\n                    }\n                );\n            },\n\n            byKey: !isRawLoadMode && function(key) {\n                return send(\n                    \"load\",\n                    true,\n                    {\n                        url: loadUrl,\n                        method: loadMethod,\n                        data: loadOptionsToActionParams({ filter: filterByKey(key) })\n                    },\n                    function(d, res) {\n                        processLoadResponse(d, res, function(res) {\n                            return [ res.data[0] ];\n                        });\n                    }\n                );\n            },\n\n            update: updateUrl && function(key, values) {\n                return send(\n                    \"update\",\n                    true,\n                    {\n                        url: updateUrl,\n                        method: options.updateMethod || \"PUT\",\n                        data: {\n                            key: serializeKey(key),\n                            values: JSON.stringify(values)\n                        }\n                    },\n                    handleInsertUpdateSuccess\n                );\n            },\n\n            insert: insertUrl && function(values) {\n                return send(\n                    \"insert\",\n                    true,\n                    {\n                        url: insertUrl,\n                        method: options.insertMethod || \"POST\",\n                        data: { values: JSON.stringify(values) }\n                    },\n                    handleInsertUpdateSuccess\n                );\n            },\n\n            remove: deleteUrl && function(key) {\n                return send(\"delete\", true, {\n                    url: deleteUrl,\n                    method: options.deleteMethod || \"DELETE\",\n                    data: { key: serializeKey(key) }\n                });\n            }\n\n        };\n\n        CUSTOM_STORE_OPTIONS.forEach(function(name) {\n            var value = options[name];\n            if(value !== undefined)\n                result[name] = value;\n        });\n\n        return result;\n    }\n\n    function processLoadResponse(d, res, getResolveArgs) {\n        res = expandLoadResponse(res);\n\n        if(!res || typeof res !== \"object\")\n            d.reject(new Error(\"Unexpected response received\"));\n        else\n            d.resolve.apply(d, getResolveArgs(res));\n    }\n\n    function expandLoadResponse(value) {\n        if(Array.isArray(value))\n            return { data: value };\n\n        if(typeof value === \"number\")\n            return { totalCount: value };\n\n        return value;\n    }\n\n    function createLoadExtra(res) {\n        return {\n            totalCount: \"totalCount\" in res ? res.totalCount : -1,\n            groupCount: \"groupCount\" in res ? res.groupCount : -1,\n            summary: res.summary || null\n        };\n    }\n\n    function serializeKey(key) {\n        if(typeof key === \"object\")\n            return JSON.stringify(key);\n\n        return key;\n    }\n\n    function serializeDate(date) {\n\n        function zpad(text, len) {\n            text = String(text);\n            while(text.length < len)\n                text = \"0\" + text;\n            return text;\n        }\n\n        var builder = [1 + date.getMonth(), \"/\", date.getDate(), \"/\", date.getFullYear()],\n            h = date.getHours(),\n            m = date.getMinutes(),\n            s = date.getSeconds(),\n            f = date.getMilliseconds();\n\n        if(h + m + s + f > 0)\n            builder.push(\" \", zpad(h, 2), \":\", zpad(m, 2), \":\", zpad(s, 2), \".\", zpad(f, 3));\n\n        return builder.join(\"\");\n    }\n\n    function stringifyDatesInFilter(crit) {\n        crit.forEach(function(v, k) {\n            if(Array.isArray(v)) {\n                stringifyDatesInFilter(v);\n            } else if(Object.prototype.toString.call(v) === \"[object Date]\") {\n                crit[k] = serializeDate(v);\n            }\n        });\n    }\n\n    function isAdvancedGrouping(expr) {\n        if(!Array.isArray(expr))\n            return false;\n\n        for(var i = 0; i < expr.length; i++) {\n            if(\"groupInterval\" in expr[i] || \"isExpanded\" in expr[i])\n                return true;\n        }\n\n        return false;\n    }\n\n    function getErrorMessageFromXhr(xhr) {\n        var mime = xhr.getResponseHeader(\"Content-Type\"),\n            responseText = xhr.responseText;\n\n        if(!mime)\n            return null;\n\n        if(mime.indexOf(\"text/plain\") === 0)\n            return responseText;\n\n        if(mime.indexOf(\"application/json\") === 0) {\n            var jsonObj = safeParseJSON(responseText);\n\n            if(typeof jsonObj === \"string\")\n                return jsonObj;\n\n            if(typeof jsonObj === \"object\") {\n                for(var key in jsonObj) {\n                    if(typeof jsonObj[key] === \"string\")\n                        return jsonObj[key];\n                }\n            }\n\n            return responseText;\n        }\n\n        return null;\n    }\n\n    function safeParseJSON(json) {\n        try {\n            return JSON.parse(json);\n        } catch(x) {\n            return null;\n        }\n    }\n\n    return {\n        createStore: function(options) {\n            return new CustomStore(createStoreConfig(options));\n        }\n    };\n});\n"]},"metadata":{},"sourceType":"script"}